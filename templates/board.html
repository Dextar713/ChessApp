{% extends "layout.html" %}

{% block head %}
    {{ super() }}
{% endblock %}

{% block navbar %}
    {{ super() }}
{% endblock %}

{% block flash %}
    {{ super() }}
{% endblock %}

{% block content %}
<section id="game">
  <div>
    <div>
      <div class="player_up">
        <h2>Player Up</h2>
      </div>
      <div class="board">
        <table>
        {% for i in range(7, -1, -1): %}
          <tr>
          {% for j in range(0, 8, 1): %}
            {% if (i + j) % 2 == 0: %}
            {% set field_type = 'black' %}
            {% else: %}
            {% set field_type = 'white' %}
            {% endif %}
            <td class="field {{field_type}}" id="f{{j}}{{i}}">
              {% set fig = game.board.get_fig(j, i) %}
              {% if fig is not none: %}
<!--              <button class="figure">-->
                <div class="figure">
                  <img src="{{fig.image}}" width="100%" height="100%">
                </div>
<!--              </button>-->
              {% endif %}
            </td>
            {% endfor %}
          </tr>
          {% endfor %}
        </table>
      </div>
      <div class="player_down">
        <h2>Player Down</h2>
      </div>
    </div>
    <div class="timer">
      <div class="timer_up">
        <div>
          <h2>
            {{mins}}:{{extra}}
          </h2>
         </div>
      </div>
      <div class="timer_field">
        {% with items=get_flashed_messages() %}
        <div class="res">
            <ul>
            {% for item in items %}
            <li>{{ item }}</li>
            {% endfor %}
            </ul>
        </div>
        {% endwith %}
      </div>
      <div class="timer_down">
        <div>
          <h2>
            {{mins}}:{{extra}}
          </h2>
         </div>
      </div>
    </div>
  </div>
</section>

{% endblock %}

{% block js %}
  <script src="static/js/chess_game.js"></script>
{% endblock %}